extends ../../base
include ../mixins

block meta
	link(rel="stylesheet" href="/docs/assets/api/endpoints/style.css")

block main
	h1= title

	p#url
		span.method POST
		span.host
			= url.host
			| /
		span.path= url.path

	if endpoint.desc
		p#desc= endpoint.desc[lang] || endpoint.desc['ja']

	if endpoint.requireCredential
		div.ui.info: p= i18n('docs.api.endpoints.require-credential')

	if endpoint.limit
		div.ui.info.warn
			p
				b!= i18n('docs.api.endpoints.has-limit')
				if endpoint.limit.duration
					!= i18n('docs.api.endpoints.duration-limit').replace('{duration}', endpoint.limit.duration).replace('{max}', endpoint.limit.max)
				if endpoint.limit.minInterval
					!= i18n('docs.api.endpoints.min-interval-limit').replace('{interval}', endpoint.limit.minInterval)

	if params && Object.keys(params).length > 0
		section
			h2= i18n('docs.api.endpoints.params')
			+propTable(params)

			if paramDefs
				each paramDef in paramDefs
					section(id= paramDef.name)
						h3= paramDef.name
						+propTable(paramDef.params)
	if params && Object.keys(params).length == 0
		section
			h2= i18n('docs.api.endpoints.params')
			p= i18n('docs.api.endpoints.no-params')

	if res
		section
			h2= i18n('docs.api.endpoints.res')
			+propTable(res)

			if resDefs
				each resDef in resDefs
					section(id= resDef.name)
						h3= resDef.name
						+propTable(resDef.props)
